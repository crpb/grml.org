<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 9.0.0rc2" />
<title>grml2usb(8)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>grml2usb(8)</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_name">1. Name</h2>
<div class="sectionbody">
<div class="paragraph"><p>grml2usb - install Grml ISO(s) on usb device for booting</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis">2. Synopsis</h2>
<div class="sectionbody">
<div class="paragraph"><p>grml2usb [ options ] &lt;ISO[s]&gt; &lt;device&gt;</p></div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph"><p>Important! The Grml team does not take responsibility for loss of any data!</p></div>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">3. Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>grml2usb installs Grml on a given partition of your usb device and makes
it bootable. It provides multiboot ISO support, meaning you can specify
several Grml ISOs on the command line at once and select the Grml
flavour you would like to boot on the bootprompt then. Note that the
<strong>first</strong> ISO specified on the grml2usb command line will become the
default one (that&#8217;s the one that will boot when just pressing enter on
the bootprompt or wait until the boot timeout matches).</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/important.png" alt="Important" />
</td>
<td class="content">By default a compatible master boot record (MBR) is installed on the device
(being for example /dev/sdX when executing <em>grml2usb grml.iso /dev/sdX1</em>) and
syslinux is being used as default bootloader. Avoid installation of the default
MBR using the <em>--skip-mbr</em> option or if you encounter any problems with the
default MBR consider using <em>--syslinux-mbr</em> instead.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="options">4. Options</h2>
<div class="sectionbody">
<div class="paragraph"><p>ISO[s] should be the path to one or multiple grml-ISOs and/or the path to
the currently running live-system (being /run/live/medium).</p></div>
<div class="paragraph"><p>The device either might be a device name like /dev/sdX1 or a directory. When
specifying a device name the device is mounted automatically. When specifying a
directory grml2usb is assuming that you did set up a bootloader on your own (or
don&#8217;t need one) and a bootloader won&#8217;t be installed automatically.</p></div>
<div class="paragraph"><p>The following options are supported:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>--bootoptions=&#8230;</strong>
</dt>
<dd>
<p>
Use specified bootoptions as default. To use flavour name as a argument for a
boot parameter use %flavour which will be expanded to the flavour name. To add
multiple bootoptions you can specify the option multiple time.
</p>
</dd>
<dt class="hdlist1">
<strong>--bootloader-only</strong>
</dt>
<dd>
<p>
Do <strong>not</strong> copy files but instead just install a bootloader.  Note that the boot
addons are copied to /boot/addons at this stage as well.  If you want to skip
copying the boot addons consider using the --skip-addons option.
</p>
</dd>
<dt class="hdlist1">
<strong>--copy-only</strong>
</dt>
<dd>
<p>
Copy files only but do <strong>not</strong> install a bootloader.
</p>
</dd>
<dt class="hdlist1">
<strong>--dry-run</strong>
</dt>
<dd>
<p>
Avoid executing commands, instead show what would be executed.
Warning: please notice that the ISO has to be mounted anyway, otherwise
identifying the Grml flavour would not be possible.
</p>
</dd>
<dt class="hdlist1">
<strong>--fat16</strong>
</dt>
<dd>
<p>
Format specified partition with FAT16.
<strong>Important:</strong> this will destroy any existing data on the specified partition!
</p>
</dd>
<dt class="hdlist1">
<strong>--force</strong>
</dt>
<dd>
<p>
Force any (possible dangerous) actions requiring manual interaction (like --fat16).
</p>
</dd>
<dt class="hdlist1">
<strong>--grub</strong>
</dt>
<dd>
<p>
Install grub bootloader instead of (default) syslinux.
</p>
</dd>
<dt class="hdlist1">
<strong>--grub-mbr</strong>
</dt>
<dd>
<p>
Install grub into MBR (Master Boot Record) instead of PBR (Partition Boot
Record). Check out <a href="#mbr-vs-pbr">the <em>mbr-vs-pbr</em> section in the FAQ of this document</a> for further details.
</p>
</dd>
<dt class="hdlist1">
<strong>--help</strong>
</dt>
<dd>
<p>
Display usage information and exit.
</p>
</dd>
</dl></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>--mbr-menu</strong>
</dt>
<dd>
<p>
Install master boot record (MBR) with integrated boot menu: interactively choose
the partition to boot from, with a timeout to load the default partition, or
boot from floppy. When NOT using the --mbr-menu option a MBR with LBA and large
disc support but without an integrated boot menu is installed (so it&#8217;s not
visible at all but instead directly jumps to the bootloader - being grub or
syslinux). Note: This options is available only when using the default MBR and
won&#8217;t have any effect if you&#8217;re using the <em>--syslinux-mbr</em> option.
</p>
</dd>
<dt class="hdlist1">
<strong>--quiet</strong>
</dt>
<dd>
<p>
Do not output anything but just errors on console.
</p>
</dd>
<dt class="hdlist1">
<strong>--skip-addons</strong>
</dt>
<dd>
<p>
Do not install /boot/addons/ files (like dos, grub, memdisk,&#8230;).
</p>
</dd>
<dt class="hdlist1">
<strong>--remove-bootoption=&#8230;</strong>
</dt>
<dd>
<p>
Remove specified bootoption (could be a regex) from existing boot options. Use
multiple entries for removing different bootoptions at once.
</p>
</dd>
<dt class="hdlist1">
<strong>--skip-bootflag</strong>
</dt>
<dd>
<p>
Do not check for presence of boot flag on target device.
</p>
</dd>
<dt class="hdlist1">
<strong>--skip-grub-config</strong>
</dt>
<dd>
<p>
Skip generation of grub configuration files. By default the configuration
files for syslinux <strong>and</strong> grub will be written so you&#8217;ve a working configuration
file no matter whether you&#8217;re using grub or syslinux as bootloader.
</p>
</dd>
<dt class="hdlist1">
<strong>--skip-mbr</strong>
</dt>
<dd>
<p>
Do not touch/install the master boot record (MBR).
</p>
</dd>
<dt class="hdlist1">
<strong>--skip-syslinux-config</strong>
</dt>
<dd>
<p>
Skip generation of syslinux configuration files. By default the configuration
files for syslinux <strong>and</strong> grub will be written so you&#8217;ve a working configuration
file no matter whether you&#8217;re using grub or syslinux as bootloader.
</p>
</dd>
<dt class="hdlist1">
<strong>--skip-usb-check</strong>
</dt>
<dd>
<p>
Skip check to verify whether given device is a removable device.
Some USB devices are known to report wrong information, when using
such a device you can skip grml2usb&#8217;s removable device check.
</p>
</dd>
<dt class="hdlist1">
<strong>--syslinux</strong>
</dt>
<dd>
<p>
This option is deprecated and is being left only for backwards compatibility
reasons. Syslinux is the default bootloader of grml2usb and therefore the
<em>--syslinux</em> option doesn&#8217;t have any effects. If you do not want to use syslinux
as bootloader consider using the <em>--grub</em> option.
</p>
</dd>
<dt class="hdlist1">
<strong>--syslinux-mbr</strong>
</dt>
<dd>
<p>
Install syslinux' master boot record (MBR, which is booting from the partition
with the "active" flag set) instead of the default one.  If you encounter any
problems with the default MBR you can try using the syslinux MBR instead. If
that works for you please <a href="#author">let us know</a> so we can adjust our default
MBR accordingly.
</p>
</dd>
</dl></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>-v</strong>, <strong>--version</strong>
</dt>
<dd>
<p>
Return version and exit.
</p>
</dd>
<dt class="hdlist1">
<strong>--verbose</strong>
</dt>
<dd>
<p>
Enable verbose mode.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_developers_corner">5. Developers Corner</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="directory-layout">5.1. Directory layout on usb device</h3>
<div class="literalblock">
<div class="content">
<pre><code>boot/ -&gt;
  |-- addons/
  |   |-- allinone.img     [grub - all in one image]
  |   |-- bsd4grml/        [MirBSD]
  |   |-- balder10.imz     [FreeDOS]
  |   |-- memdisk          [chainloading helper]
  |   |-- memtest          [memtest86+]
  |-- release/
  |   |-- grml/
  |   |   |-- linux26      [Kernel]
  |   |   |-- initrd.gz    [initramfs]
  |   |-- grml64
  |   |   |-- linux26      [Kernel]
  |   |   |-- initrd.gz    [initramfs]
  |   |-- grml-medium
  |   |   |-- linux26      [...]
  |   |   |-- initrd.gz
  |   |-- grml64-medium
  |   |   |-- linux26
  |   |   |-- initrd.gz
  |   |-- grml-small
  |   |   |-- linux26
  |   |   |-- initrd.gz
  |   `-- grml64-small
  |       |-- linux26
  |       |-- initrd.gz
  |-- grub/
  |   |-- grml.png         [graphical bootsplash background image for grub2]
  |   |-- grub.cfg         [configuration file for grub2]
  |   |-- menu.lst         [configuration file for grub1]
  |   |-- splash.xpm.gz    [splash screen for grub1]
  `-- syslinux/
      |-- grml.png         [graphical bootsplash background image for syslinux]
      |-- syslinux.cfg     [main configuration file for syslinux]
      `-- [....]           [several further config files for syslinux]</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>grml/
  |-- grml2usb.txt         [not yet implemented]
  |-- grml-cheatcodes.txt  [list of bootoptions for Grml]
  |-- grml-version.txt     [file containing information about grml-version]
  |-- LICENSE.txt          [license information]
  |-- md5sums              [md5sums of original ISO]
  |-- README.txt           [informational text]
  `-- web/                 [browser related files]
      |-- index.html
      |-- style.css
      `-- images/
          |-- button.png
          |-- favicon.png
          |-- linux.jpg
          `-- logo.png</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>live/
  |-- grml/
  |   |-- filesystem.module    [module specifying which squashfs should be used for grml]
  |   `-- grml.squashfs        [squashfs file for grml]
  |-- grml-medium/
  |   |-- filesystem.module    [module specifying which squashfs should be used for grml-medium]
  |   `-- grml-medium.squashfs [squashfs file for grml-medium]
  |-- grml-small/
  |   |-- filesystem.module    [module specifying which squashfs should be used for grml-medium]
  |   `-- grml-small.squashfs  [squashfs file for grml-small]
  `-- ...</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="source">5.2. Grabbing the source</h3>
<div class="literalblock">
<div class="content">
<pre><code>% git clone git://git.grml.org/grml2usb.git</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="debugging">5.3. Developers Debugging Hints</h3>
<div class="paragraph"><p>To play with grml2usb you can avoid using a real device via a loopback file
setup, like:</p></div>
<div class="literalblock">
<div class="content">
<pre><code># dd if=/dev/zero of=~/loopback bs=1M count=100 # adjust size to your needs
# losetup /dev/loop1 ~/loopback</code></pre>
</div></div>
<div class="paragraph"><p>Then create according partitions either running for example:</p></div>
<div class="literalblock">
<div class="content">
<pre><code># echo -en "n\np\n1\n\n\nt\n6\na\n1\n w\n" | fdisk /dev/loop1</code></pre>
</div></div>
<div class="paragraph"><p>or:</p></div>
<div class="literalblock">
<div class="content">
<pre><code># parted /dev/loop1 -s "mkpart primary fat16 0 -1s mkfs 1 fat16"</code></pre>
</div></div>
<div class="paragraph"><p>Finally create a filesystem and execute grml2usb as needed:</p></div>
<div class="literalblock">
<div class="content">
<pre><code># mkfs.vfat /dev/loop1
# grml2usb --bootloader-only /grml/isos/grml64-small_2018.12.iso /dev/loop1</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="performance-tracing">5.4. Performance tracing</h3>
<div class="literalblock">
<div class="content">
<pre><code># blktrace -d /dev/sdX -o - | blkparse -i -
# grml2usb grml64-full_2018.12.iso /dev/sdX1</code></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting">6. Troubleshooting and Pitfalls when booting</h2>
<div class="sectionbody">
<div class="paragraph"><p>Here is a list of common error messages from BIOS/bootloader when trying to boot
from USB.</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<strong>Error message</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ran out of input data. System halted
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>Reason</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Everything OK, except for the filesystem used on your usb device. So
instead of fat16 you are using for example fat32. Fix: use the appropriate
filesystem (fat16 for usb pens usually). The Bootsplash might be displayed, the
kernel loads but you very soon get the error message.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>Error message</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Invalid operating system
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>Reason</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
the partition layout is not ok. Very probably there&#8217;s no primary
  partition (/dev/sdX{1..4}) or none has the flag <em>bootable</em> set.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>Error message</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Boot error.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>Reason</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Some BIOSses offer different modes for USB booting. The proper mode
to boot a USB stick is USB-HDD. If that doesn’t work or is not supported by your
system, you need to format your USB-Stick as USB-ZIP.  To do this, syslinux
contains an utility called mkdiskimage, which you can use to re-format your USB
stick in USB-ZIP format running <em>mkdiskimage -4 /dev/sdX 1 64 32</em>. Please be
aware that this procedure will erase all data on your stick.  After executing
mkdiskimage just continue installing as usual (grml2usb &#8230;  /dev/sdX4). Note
that this is not going to work for any device larger than 8 GB, since
mkdiskimage only supports 1024c 256h 63s. For a more detailed explanation, refer
to /usr/share/doc/syslinux-common/usbkey.txt.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>Error message</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
No operating system found.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>Reason</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
you forgot to set the boot-flag on the partition. Or there really isn&#8217;t
any operating system at all. :)
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>Error message</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
kernel-panic: unable to mount root-fs&#8230;
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>Reason</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Kernel boots but fails to find the root filesystem. The root=
argument in your kernel commandline is pointing to the wrong device. Adjust
root=&#8230;, consider using root=UUID=&#8230;.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>Error message</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Could not find kernel image: &#8230;
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>Reason</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
either a broken isolinux/syslinux version or a broken BIOS. Check out
whether the vendor provides a BIOS update or if using bootloader grub instead of
isolinux/syslinux fixes the problem.
</p>
</td>
</tr>
</table></div>
</div>
</div>
<div class="sect1">
<h2 id="faq">7. Frequently Asked Questions (FAQ)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="download">7.1. Where can I get grml2usb?</h3>
<div class="paragraph"><p>grml2usb is available as Debian package via <a href="http://deb.grml.org/">the
grml-testing Debian repository</a>.</p></div>
<div class="paragraph"><p>If you do not want to (or can&#8217;t) use the grml2usb Debian package you can either
use the grml2usb git tree running:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>git clone git://git.grml.org/grml2usb.git
cd grml2usb
make -C mbr
sudo ./grml2usb ...</code></pre>
</div></div>
<div class="paragraph"><p>or download the provided
<a href="http://grml.org/grml2usb/grml2usb.tgz">http://grml.org/grml2usb/grml2usb.tgz</a>
(<a href="http://grml.org/grml2usb/grml2usb.tgz.md5.asc">gpg signed md5 hash</a>).
Download and extract the tarball and execute the provided script <em>install.sh</em>.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">It is <strong>NOT</strong> enough to have just the grml2usb script itself without the according
files provided either via the Debian package, the git tree or the file
grml2usb.tgz.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="dd">7.2. Why can&#8217;t I just dd the ISO to a USB device?</h3>
<div class="paragraph"><p>Well, you can. :) Starting with Grml 2009.10 the ISOs are dd-able straight out-of-the-box.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/important.png" alt="Important" />
</td>
<td class="content">Note that ANY existing data on your USB device will be destroyed when
using the dd approach.</td>
</tr></table>
</div>
<div class="paragraph"><p>This allows you to dd the Grml ISO to your USB device (use for example
<a href="http://www.chrysocome.net/rawwrite">rawwrite</a> if you&#8217;ve just a Windows
system available) running:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>% dd if=grml64-full_2018.12.iso of=/dev/sdX</code></pre>
</div></div>
<div class="paragraph"><p>where /dev/sdX is your USB device. Of course this doesn&#8217;t provide such a
flexible system like with grml2usb (no multi-ISO setup, no additional default
bootoptions,&#8230;) but it&#8217;s a nice way to get a working USB boot setup if you
don&#8217;t have grml2usb available.</p></div>
</div>
<div class="sect2">
<h3 id="grml2usb-vs-dd">7.3. What&#8217;s the difference between grml2usb and just using dd?</h3>
<div class="paragraph"><p>grml2usb does not remove any data from your USB device and does not alter the
partition table at all. grml2usb provides multi-ISO support, support for adding
default bootoptions and selecting the bootloader (syslinux vs. grub) without
having to manually touch the ISO at all.</p></div>
</div>
<div class="sect2">
<h3 id="grml2iso">7.4. What&#8217;s grml2iso?</h3>
<div class="paragraph"><p>grml2iso is a script which uses grml2usb to generate a multiboot ISO out of
several grml ISOs. See <em>man grml2iso</em> for further details.</p></div>
</div>
<div class="sect2">
<h3 id="menu-lst">7.5. Why is there a menu.lst and a grub.cfg inside /boot/grub/?</h3>
<div class="paragraph"><p>grml2usb supports grub version 1 (grub1) as well as grub version 2 (grub2).
Whereas grub1 uses menu.lst the new version grub2 needs grub.cfg.
Providing both files allows grml2usb to install grub on the target device
no matter which grub version is available on the host where grml2usb is
executed on.</p></div>
</div>
<div class="sect2">
<h3 id="stage1">7.6. grub-install fails with 'The file ../boot/grub/stage1 not read correctly"?!</h3>
<div class="paragraph"><p>Check whether the partition has the right partition type. For example do NOT use
FAT16 (partition type 6) when using a ext3 filesystem on the partition but
instead use the correct partition type (<em>83</em> - Linux) then.</p></div>
</div>
<div class="sect2">
<h3 id="grub-install-xfs_freeze">7.7. grub-install complains about /sbin/grub-install and/or xfs_freeze?!</h3>
<div class="paragraph"><p>The following message:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>You shouldn't call /sbin/grub-install. Please call /usr/sbin/grub-install instead!
xfs_freeze: specified file ["/tmp/tmpqaBK6z/boot/grub"] is not on an XFS filesystem</code></pre>
</div></div>
<div class="paragraph"><p>This is "normal". grub-install sends those messages to stderr. To avoid hiding any
possible real error messages grml2usb doesn&#8217;t ignore those messages.</p></div>
</div>
<div class="sect2">
<h3 id="device-map">7.8. grub-install complains about /boot/grub/device.map?!</h3>
<div class="paragraph"><p>The following message:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>grub-probe: error: Cannot open `/boot/grub/device.map'</code></pre>
</div></div>
<div class="paragraph"><p>This is "normal" (at least with grub1). This isn&#8217;t a problem, because the
device.map file will be generated on the target device anyway.</p></div>
</div>
<div class="sect2">
<h3 id="unary-operator">7.9. grub-install complains about a unary operator?!</h3>
<div class="paragraph"><p>The following message:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>'/usr/sbin/grub-install: line 374: [: =: unary operator expected'</code></pre>
</div></div>
<div class="paragraph"><p>This is "normal". Just ignore it. (It usually doesn&#8217;t appear
on the second invocation on the same device.)</p></div>
</div>
<div class="sect2">
<h3 id="unknown-filesystem">7.10. grub-install fails with grub-probe: error: unknown filesystem?!</h3>
<div class="paragraph"><p>The following message:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>grub-probe: error: unknown filesystem
Auto-detection of a filesystem module failed.
Please specify the module with the option `--modules' explicitly.</code></pre>
</div></div>
<div class="paragraph"><p>usually means that the device partition table says something else than the
filesystem on the device. For example using FAT16 as filesystem type and
using FAT32 as filesystem on the partition will not work. Either set filesystem
type to FAT32 or format the partition using FAT16. It is essential that
device partition table and filesystem use the same filesystem type.</p></div>
</div>
<div class="sect2">
<h3 id="mbr-vs-pbr">7.11. grub-setup fails after Attempting to install GRUB to a partition instead of the MBR?!</h3>
<div class="paragraph"><p>The following message:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>grub-setup: warn: Attempting to install GRUB to a partition instead of the MBR.  This is a BAD idea.
grub-setup: warn: Embedding is not possible.  GRUB can only be installed in this setup by using blocklists.  However, blocklists are UNRELIABLE and its use is discouraged.
grub-setup: error: Cannot read `/grub/core.img' correctly</code></pre>
</div></div>
<div class="paragraph"><p>appears when using grub2 versions older than 1.98 as those version introduced a
regression which avoids that grub is being installed into a partition (PBR,
Partition Boot Record) instead of MBR (Master Boot Record).</p></div>
<div class="paragraph"><p>To work around this issue you can either 1) upgrade to grub versions &gt;=1.98, 2)
install grub into the MBR (Master Boot Record) using the <em>--grub-mbr</em> option of
grml2usb or 3) switch to syslinux as bootmanager (just drop the <em>--grub</em>
option).</p></div>
</div>
<div class="sect2">
<h3 id="splash-xpm">7.12. I&#8217;m getting something like "Error: /usr/share/grml2usb/grub/splash.xpm.gz can not be read"!?</h3>
<div class="paragraph"><p>Looks like you&#8217;ve only the grml2usb script itself available. Please make sure
you&#8217;ve the grml2usb Debian package installed. The most resent stable version is
available via <a href="http://deb.grml.org/">the grml-testing Debian repository</a>.  If
you do not have a Debian system please see section <a href="#download">Where can I get grml2usb?</a> in this FAQ.</p></div>
</div>
<div class="sect2">
<h3 id="fat16">7.13. Why do I have to use a FAT16/FAT32 filesystem?</h3>
<div class="paragraph"><p>Syslinux (currently) does not support any other filesystems besides FAT16/FAT32
(though that&#8217;s a sane default if you want to share your files with other
(operating) systems). If you want to use a different filesystem (like ext2/3)
use the bootloader grub instead using grml2usb&#8217;s <em>--grub</em> option.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">FAT32 is supported since syslinux version 3.0.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="hdt-hangs">7.14. Addons &#8594; Hardware Detection Tool freezes</h3>
<div class="paragraph"><p>This usually means that the machine you ran grml2usb on had syslinux 3.x
installed. The version of hdt (Hardware detection tool) shipping with Grml
2010.12 and newer requires syslinux 4.x.</p></div>
</div>
<div class="sect2">
<h3 id="cool-idea">7.15. I think I&#8217;ve got a really cool idea!</h3>
<div class="paragraph"><p>Great! Please check out
<a href="https://git.grml.org/f/grml2usb/TODO">the TODO file</a>.
Feel free to <a href="#author">report your wishes to the author</a>. Patches highly
appreciated.</p></div>
</div>
<div class="sect2">
<h3 id="booting-from-usb">7.16. I&#8217;ve problems with booting from USB.</h3>
<div class="paragraph"><p>Check out <a href="#troubleshooting">Troubleshooting and Pitfalls when booting</a>.</p></div>
</div>
<div class="sect2">
<h3 id="found-a-bug">7.17. I&#8217;ve found a bug!</h3>
<div class="paragraph"><p>Please <a href="#author">report it to the author</a>. Please provide usage examples and output
of your grml2usb commandline (consider using the "--verbose" option).</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="usage-examples">8. Usage examples</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre><code># grml2usb /home/grml/grml64-full_2018.12.iso /dev/sdX1</code></pre>
</div></div>
<div class="paragraph"><p>Install specified ISO on device /dev/sdX1.</p></div>
<div class="literalblock">
<div class="content">
<pre><code># grml2usb /home/grml/grml64-full_2018.12.iso /home/grml/grml32-full_2018.12.iso  /dev/sdX1</code></pre>
</div></div>
<div class="paragraph"><p>Install specified ISOs on device /dev/sdX1 for multibooting ISOs.</p></div>
<div class="literalblock">
<div class="content">
<pre><code># grml2usb /run/live/medium /dev/sdX1</code></pre>
</div></div>
<div class="paragraph"><p>Install currently running Grml live system on device /dev/sdX1.</p></div>
<div class="literalblock">
<div class="content">
<pre><code># grml2usb /run/live/medium /home/grml/grml64-full_2018.12.iso /dev/sdX1</code></pre>
</div></div>
<div class="paragraph"><p>Install currently running Grml live system and the specified
ISO on device /dev/sdX1 for multibooting.</p></div>
<div class="literalblock">
<div class="content">
<pre><code># grml2usb --fat16 /home/grml/grml64-full_2018.12.iso /dev/sdX1</code></pre>
</div></div>
<div class="paragraph"><p>Install specified ISO on device /dev/sdX1 and format partition /dev/sdX1 with
FAT16 filesystem.</p></div>
<div class="literalblock">
<div class="content">
<pre><code># grml2usb --grub --grub-mbr /home/grml/grml64-full_2018.12.iso /dev/sdX1</code></pre>
</div></div>
<div class="paragraph"><p>Install specified ISO on device /dev/sdX1 and use grub as bootloader (instead of
syslinux being the default) and install a master boot record (MBR) to the MBR of
/dev/sdX.</p></div>
<div class="literalblock">
<div class="content">
<pre><code># grml2usb --bootoptions="lang=de ssh=mysecret" grml64-full_2018.12.iso /dev/sdX1
# grml2usb --bootoptions="lang=de" --bootoptions="ssh=mysecret" grml64-full_2018.12.iso /dev/sdX1</code></pre>
</div></div>
<div class="paragraph"><p>Install specified ISO on device /dev/sdX1 and use "lang=de ssh=mysecret" as
default bootoptions.</p></div>
<div class="literalblock">
<div class="content">
<pre><code># grml2usb --remove-bootoption="vga=791" --remove-bootoption="nomce" grml64-full_2018.12.iso /dev/sdX1</code></pre>
</div></div>
<div class="paragraph"><p>Install specified ISO on device /dev/sdX1 remove vga=791 and nomce from existing bootoptions.</p></div>
<div class="literalblock">
<div class="content">
<pre><code># grml2usb --bootoptions="persistent-path=%flavour_name" grml64-small_2018.12.iso grml32-small_2018.12.iso  /dev/sdX1</code></pre>
</div></div>
<div class="paragraph"><p>Install specified ISOs on device /dev/sdx and add parameter persistent-path
to every menu entry. %flavour_name will be expanded to the flavour of the specific
iso, e.g. grml64 and grml.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="resources">9. Online Resources</h2>
<div class="sectionbody">
<div class="paragraph"><p>Check out the <a href="http://grml.org/grml2usb/">grml2usb webpage</a> and the
<a href="https://git.grml.org/?p=grml2usb.git">grml2usb git repository</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="bugs">10. Bugs</h2>
<div class="sectionbody">
<div class="paragraph"><p>Please report feedback, bugreports and wishes <a href="#author">to the author</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="author">11. Author</h2>
<div class="sectionbody">
<div class="paragraph"><p>Michael Prokop &lt;<a href="mailto:mika@grml.org">mika@grml.org</a>&gt;</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2020-06-03 13:04:51 UTC
</div>
</div>
</body>
</html>
